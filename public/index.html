<!doctype html>
<html>
  <head>
    <title>WeatherTo</title>
    <link rel="stylesheet" type="text/css" href="css/index.css" />

  </head>
  <body>

    <div ng-controller="CurrentController">

      Current temp: {{ current.temperature }}

      <button ng-click="modal('current', {current: current})">i</button>

    </div>

    <div ng-controller="PredictController">

      <div>
        <form>
          <input ng-model="address" name="address" type="text" ng-change="onAddressChange()" />
        </form>
        <ol>
          <li ng-repeat="loc in locationResults">
            <a ng-click="pickLocation(loc)">{{ loc.name }}</a>
          </li>
        </ol>
      </div>

      <ul>
        <li ng-repeat="pref in prefs">

          <button ng-click="collapses[pref.id] = ! collapses[pref.id]">
            v
          </button>

          <button ng-click="editPref(pref)">e</button>

          {{ pref.name }}
          {{ pref.temperature.min }} - {{ pref.temperature.max }}

          <ul collapse="! collapses[pref.id]">
            <!-- <li ng-repeat="condSet in conditionSetsByPref[pref.id]"> -->
            <li ng-repeat="condSet in pref.conditionSets">
              <button ng-click="collapses[pref.id+'-'+$index] = ! collapses[pref.id+'-'+$index]">
                v
              </button>
              <span>
                {{ condSet.start | amCalendar }} - {{ condSet.end | amCalendar }}
              </span>
              <ol collapse="! collapses[pref.id+'-'+$index]">
                <li ng-repeat="cond in condSet.items">
                  <button ng-click="modal('condition', {pref: pref, cond: cond})">
                    i
                  </button>
                  <span>{{ cond.time | amCalendar }}</span>
                </li>
              </ol>
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <script src="bower_components/requirejs/require.js"></script>
    <script src="js/require-config.js"></script>
    <script src="js/index.js"></script>

    <script src="//localhost:35729/livereload.js"></script>

  </body>
</html>
